import{d as Xe,e as Be}from"./useTags-C0ZKYZkn.js";import{f as We,e as Ne,S as Te,h as qe}from"./index-DtdK4RIk.js";function dt(m,F){return F.forEach(function(x){x&&typeof x!="string"&&!Array.isArray(x)&&Object.keys(x).forEach(function(f){if(f!=="default"&&!(f in m)){var e=Object.getOwnPropertyDescriptor(x,f);Object.defineProperty(m,f,e.get?e:{enumerable:!0,get:function(){return x[f]}})}})}),Object.freeze(m)}function Ve(m,F){return new Promise(function(x,f){let e;return ht(m).then(function(t){try{return e=t,x(new Blob([F.slice(0,2),e,F.slice(2)],{type:"image/jpeg"}))}catch(l){return f(l)}},f)})}const ht=m=>new Promise((F,x)=>{const f=new FileReader;f.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let l=0;if(t.getUint16(l)!==65496)return x("not a valid JPEG");for(l+=2;;){const a=t.getUint16(l);if(a===65498)break;const p=t.getUint16(l+2);if(a===65505&&t.getUint32(l+4)===1165519206){const v=l+10;let r;switch(t.getUint16(v)){case 18761:r=!0;break;case 19789:r=!1;break;default:return x("TIFF header contains invalid endian")}if(t.getUint16(v+2,r)!==42)return x("TIFF header contains invalid version");const i=t.getUint32(v+4,r),n=v+i+2+12*t.getUint16(v+i,r);for(let s=v+i+2;s<n;s+=12)if(t.getUint16(s,r)==274){if(t.getUint16(s+2,r)!==3)return x("Orientation data type is invalid");if(t.getUint32(s+4,r)!==1)return x("Orientation data count is invalid");t.setUint16(s+8,1,r);break}return F(e.slice(l,l+2+p))}l+=2+p}return F(new Blob)}),f.readAsArrayBuffer(m)});var Oe={},gt={get exports(){return Oe},set exports(m){Oe=m}};(function(m){var F,x,f={};gt.exports=f,f.parse=function(e,t){for(var l=f.bin.readUshort,a=f.bin.readUint,p=0,v={},r=new Uint8Array(e),i=r.length-4;a(r,i)!=101010256;)i--;p=i,p+=4;var n=l(r,p+=4);l(r,p+=2);var s=a(r,p+=2),h=a(r,p+=4);p+=4,p=h;for(var U=0;U<n;U++){a(r,p),p+=4,p+=4,p+=4,a(r,p+=4),s=a(r,p+=4);var S=a(r,p+=4),b=l(r,p+=4),k=l(r,p+2),O=l(r,p+4);p+=6;var C=a(r,p+=8);p+=4,p+=b+k+O,f._readLocal(r,C,v,s,S,t)}return v},f._readLocal=function(e,t,l,a,p,v){var r=f.bin.readUshort,i=f.bin.readUint;i(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var s=r(e,t+=8),h=r(e,t+=2);t+=2;var U=f.bin.readUTF8(e,t,s);if(t+=s,t+=h,v)l[U]={size:p,csize:a};else{var S=new Uint8Array(e.buffer,t);if(n==0)l[U]=new Uint8Array(S.buffer.slice(t,t+a));else{if(n!=8)throw"unknown compression method: "+n;var b=new Uint8Array(p);f.inflateRaw(S,b),l[U]=b}}},f.inflateRaw=function(e,t){return f.F.inflate(e,t)},f.inflate=function(e,t){return e[0],e[1],f.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},f.deflate=function(e,t){t==null&&(t={level:6});var l=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[l]=120,a[l+1]=156,l+=2,l=f.F.deflateRaw(e,a,l,t.level);var p=f.adler(e,0,e.length);return a[l+0]=p>>>24&255,a[l+1]=p>>>16&255,a[l+2]=p>>>8&255,a[l+3]=p>>>0&255,new Uint8Array(a.buffer,0,l+4)},f.deflateRaw=function(e,t){t==null&&(t={level:6});var l=new Uint8Array(50+Math.floor(1.1*e.length)),a=f.F.deflateRaw(e,l,a,t.level);return new Uint8Array(l.buffer,0,a)},f.encode=function(e,t){t==null&&(t=!1);var l=0,a=f.bin.writeUint,p=f.bin.writeUshort,v={};for(var r in e){var i=!f._noNeed(r)&&!t,n=e[r],s=f.crc.crc(n,0,n.length);v[r]={cpr:i,usize:n.length,crc:s,file:i?f.deflateRaw(n):n}}for(var r in v)l+=v[r].file.length+30+46+2*f.bin.sizeUTF8(r);l+=22;var h=new Uint8Array(l),U=0,S=[];for(var r in v){var b=v[r];S.push(U),U=f._writeHeader(h,U,r,b,0)}var k=0,O=U;for(var r in v)b=v[r],S.push(U),U=f._writeHeader(h,U,r,b,1,S[k++]);var C=U-O;return a(h,U,101010256),U+=4,p(h,U+=4,k),p(h,U+=2,k),a(h,U+=2,C),a(h,U+=4,O),U+=4,U+=2,h.buffer},f._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},f._writeHeader=function(e,t,l,a,p,v){var r=f.bin.writeUint,i=f.bin.writeUshort,n=a.file;return r(e,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,a.cpr?8:0),r(e,t+=2,0),r(e,t+=4,a.crc),r(e,t+=4,n.length),r(e,t+=4,a.usize),i(e,t+=4,f.bin.sizeUTF8(l)),i(e,t+=2,0),t+=2,p==1&&(t+=2,t+=2,r(e,t+=6,v),t+=4),t+=f.bin.writeUTF8(e,t,l),p==0&&(e.set(n,t),t+=n.length),t},f.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var l=t,a=0;a<8;a++)1&l?l=3988292384^l>>>1:l>>>=1;e[t]=l}return e}(),update:function(e,t,l,a){for(var p=0;p<a;p++)e=f.crc.table[255&(e^t[l+p])]^e>>>8;return e},crc:function(e,t,l){return 4294967295^f.crc.update(4294967295,e,t,l)}},f.adler=function(e,t,l){for(var a=1,p=0,v=t,r=t+l;v<r;){for(var i=Math.min(v+5552,r);v<i;)p+=a+=e[v++];a%=65521,p%=65521}return p<<16|a},f.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255,e[t+2]=l>>16&255,e[t+3]=l>>24&255},readASCII:function(e,t,l){for(var a="",p=0;p<l;p++)a+=String.fromCharCode(e[t+p]);return a},writeASCII:function(e,t,l){for(var a=0;a<l.length;a++)e[t+a]=l.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,l){for(var a,p="",v=0;v<l;v++)p+="%"+f.bin.pad(e[t+v].toString(16));try{a=decodeURIComponent(p)}catch{return f.bin.readASCII(e,t,l)}return a},writeUTF8:function(e,t,l){for(var a=l.length,p=0,v=0;v<a;v++){var r=l.charCodeAt(v);if(!(4294967168&r))e[t+p]=r,p++;else if(!(4294965248&r))e[t+p]=192|r>>6,e[t+p+1]=128|r>>0&63,p+=2;else if(!(4294901760&r))e[t+p]=224|r>>12,e[t+p+1]=128|r>>6&63,e[t+p+2]=128|r>>0&63,p+=3;else{if(4292870144&r)throw"e";e[t+p]=240|r>>18,e[t+p+1]=128|r>>12&63,e[t+p+2]=128|r>>6&63,e[t+p+3]=128|r>>0&63,p+=4}}return p},sizeUTF8:function(e){for(var t=e.length,l=0,a=0;a<t;a++){var p=e.charCodeAt(a);if(!(4294967168&p))l++;else if(!(4294965248&p))l+=2;else if(!(4294901760&p))l+=3;else{if(4292870144&p)throw"e";l+=4}}return l}},f.F={},f.F.deflateRaw=function(e,t,l,a){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],v=f.F.U,r=f.F._goodIndex;f.F._hash;var i=f.F._putsE,n=0,s=l<<3,h=0,U=e.length;if(a==0){for(;n<U;)i(t,s,n+(I=Math.min(65535,U-n))==U?1:0),s=f.F._copyExact(e,n,I,t,s+8),n+=I;return s>>>3}var S=v.lits,b=v.strt,k=v.prev,O=0,C=0,P=0,g=0,M=0,u=0;for(U>2&&(b[u=f.F._hash(e,0)]=0),n=0;n<U;n++){if(M=u,n+1<U-2){u=f.F._hash(e,n+1);var c=n+1&32767;k[c]=b[u],b[u]=c}if(h<=n){(O>14e3||C>26697)&&U-n>100&&(h<n&&(S[O]=n-h,O+=2,h=n),s=f.F._writeBlock(n==U-1||h==U?1:0,S,O,g,e,P,n-P,t,s),O=C=g=0,P=n);var w=0;n<U-2&&(w=f.F._bestMatch(e,n,k,M,Math.min(p[2],U-n),p[3]));var I=w>>>16,y=65535&w;if(w!=0){y=65535&w;var E=r(I=w>>>16,v.of0);v.lhst[257+E]++;var A=r(y,v.df0);v.dhst[A]++,g+=v.exb[E]+v.dxb[A],S[O]=I<<23|n-h,S[O+1]=y<<16|E<<8|A,O+=2,h=n+I}else v.lhst[e[n]]++;C++}}for(P==n&&e.length!=0||(h<n&&(S[O]=n-h,O+=2,h=n),s=f.F._writeBlock(1,S,O,g,e,P,n-P,t,s),O=0,C=0,O=C=g=0,P=n);7&s;)s++;return s>>>3},f.F._bestMatch=function(e,t,l,a,p,v){var r=32767&t,i=l[r],n=r-i+32768&32767;if(i==r||a!=f.F._hash(e,t-n))return 0;for(var s=0,h=0,U=Math.min(32767,t);n<=U&&--v!=0&&i!=r;){if(s==0||e[t+s]==e[t+s-n]){var S=f.F._howLong(e,t,n);if(S>s){if(h=n,(s=S)>=p)break;n+2<S&&(S=n+2);for(var b=0,k=0;k<S-2;k++){var O=t-n+k+32768&32767,C=O-l[O]+32768&32767;C>b&&(b=C,i=O)}}}n+=(r=i)-(i=l[r])+32768&32767}return s<<16|h},f.F._howLong=function(e,t,l){if(e[t]!=e[t-l]||e[t+1]!=e[t+1-l]||e[t+2]!=e[t+2-l])return 0;var a=t,p=Math.min(e.length,t+258);for(t+=3;t<p&&e[t]==e[t-l];)t++;return t-a},f.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},f.saved=0,f.F._writeBlock=function(e,t,l,a,p,v,r,i,n){var s,h,U,S,b,k,O,C,P,g=f.F.U,M=f.F._putsF,u=f.F._putsE;g.lhst[256]++,h=(s=f.F.getTrees())[0],U=s[1],S=s[2],b=s[3],k=s[4],O=s[5],C=s[6],P=s[7];var c=32+(n+3&7?8-(n+3&7):0)+(r<<3),w=a+f.F.contSize(g.fltree,g.lhst)+f.F.contSize(g.fdtree,g.dhst),I=a+f.F.contSize(g.ltree,g.lhst)+f.F.contSize(g.dtree,g.dhst);I+=14+3*O+f.F.contSize(g.itree,g.ihst)+(2*g.ihst[16]+3*g.ihst[17]+7*g.ihst[18]);for(var y=0;y<286;y++)g.lhst[y]=0;for(y=0;y<30;y++)g.dhst[y]=0;for(y=0;y<19;y++)g.ihst[y]=0;var E=c<w&&c<I?0:w<I?1:2;if(M(i,n,e),M(i,n+1,E),n+=3,E==0){for(;7&n;)n++;n=f.F._copyExact(p,v,r,i,n)}else{var A,_;if(E==1&&(A=g.fltree,_=g.fdtree),E==2){f.F.makeCodes(g.ltree,h),f.F.revCodes(g.ltree,h),f.F.makeCodes(g.dtree,U),f.F.revCodes(g.dtree,U),f.F.makeCodes(g.itree,S),f.F.revCodes(g.itree,S),A=g.ltree,_=g.dtree,u(i,n,b-257),u(i,n+=5,k-1),u(i,n+=5,O-4),n+=4;for(var d=0;d<O;d++)u(i,n+3*d,g.itree[1+(g.ordr[d]<<1)]);n+=3*O,n=f.F._codeTiny(C,g.itree,i,n),n=f.F._codeTiny(P,g.itree,i,n)}for(var o=v,D=0;D<l;D+=2){for(var T=t[D],H=T>>>23,N=o+(8388607&T);o<N;)n=f.F._writeLit(p[o++],A,i,n);if(H!=0){var Q=t[D+1],$=Q>>16,L=Q>>8&255,R=255&Q;u(i,n=f.F._writeLit(257+L,A,i,n),H-g.of0[L]),n+=g.exb[L],M(i,n=f.F._writeLit(R,_,i,n),$-g.df0[R]),n+=g.dxb[R],o+=H}}n=f.F._writeLit(256,A,i,n)}return n},f.F._copyExact=function(e,t,l,a,p){var v=p>>>3;return a[v]=l,a[v+1]=l>>>8,a[v+2]=255-a[v],a[v+3]=255-a[v+1],v+=4,a.set(new Uint8Array(e.buffer,t,l),v),p+(l+4<<3)},f.F.getTrees=function(){for(var e=f.F.U,t=f.F._hufTree(e.lhst,e.ltree,15),l=f.F._hufTree(e.dhst,e.dtree,15),a=[],p=f.F._lenCodes(e.ltree,a),v=[],r=f.F._lenCodes(e.dtree,v),i=0;i<a.length;i+=2)e.ihst[a[i]]++;for(i=0;i<v.length;i+=2)e.ihst[v[i]]++;for(var n=f.F._hufTree(e.ihst,e.itree,7),s=19;s>4&&e.itree[1+(e.ordr[s-1]<<1)]==0;)s--;return[t,l,n,p,r,s,a,v]},f.F.getSecond=function(e){for(var t=[],l=0;l<e.length;l+=2)t.push(e[l+1]);return t},f.F.nonZero=function(e){for(var t="",l=0;l<e.length;l+=2)e[l+1]!=0&&(t+=(l>>1)+",");return t},f.F.contSize=function(e,t){for(var l=0,a=0;a<t.length;a++)l+=t[a]*e[1+(a<<1)];return l},f.F._codeTiny=function(e,t,l,a){for(var p=0;p<e.length;p+=2){var v=e[p],r=e[p+1];a=f.F._writeLit(v,t,l,a);var i=v==16?2:v==17?3:7;v>15&&(f.F._putsE(l,a,r,i),a+=i)}return a},f.F._lenCodes=function(e,t){for(var l=e.length;l!=2&&e[l-1]==0;)l-=2;for(var a=0;a<l;a+=2){var p=e[a+1],v=a+3<l?e[a+3]:-1,r=a+5<l?e[a+5]:-1,i=a==0?-1:e[a-1];if(p==0&&v==p&&r==p){for(var n=a+5;n+2<l&&e[n+2]==p;)n+=2;(s=Math.min(n+1-a>>>1,138))<11?t.push(17,s-3):t.push(18,s-11),a+=2*s-2}else if(p==i&&v==p&&r==p){for(n=a+5;n+2<l&&e[n+2]==p;)n+=2;var s=Math.min(n+1-a>>>1,6);t.push(16,s-3),a+=2*s-2}else t.push(p,0)}return l>>>1},f.F._hufTree=function(e,t,l){var a=[],p=e.length,v=t.length,r=0;for(r=0;r<v;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<p;r++)e[r]!=0&&a.push({lit:r,f:e[r]});var i=a.length,n=a.slice(0);if(i==0)return 0;if(i==1){var s=a[0].lit;return n=s==0?1:0,t[1+(s<<1)]=1,t[1+(n<<1)]=1,1}a.sort(function(C,P){return C.f-P.f});var h=a[0],U=a[1],S=0,b=1,k=2;for(a[0]={lit:-1,f:h.f+U.f,l:h,r:U,d:0};b!=i-1;)h=S!=b&&(k==i||a[S].f<a[k].f)?a[S++]:a[k++],U=S!=b&&(k==i||a[S].f<a[k].f)?a[S++]:a[k++],a[b++]={lit:-1,f:h.f+U.f,l:h,r:U};var O=f.F.setDepth(a[b-1],0);for(O>l&&(f.F.restrictDepth(n,l,O),O=l),r=0;r<i;r++)t[1+(n[r].lit<<1)]=n[r].d;return O},f.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(f.F.setDepth(e.l,t+1),f.F.setDepth(e.r,t+1))},f.F.restrictDepth=function(e,t,l){var a=0,p=1<<l-t,v=0;for(e.sort(function(i,n){return n.d==i.d?i.f-n.f:n.d-i.d}),a=0;a<e.length&&e[a].d>t;a++){var r=e[a].d;e[a].d=t,v+=p-(1<<l-r)}for(v>>>=l-t;v>0;)(r=e[a].d)<t?(e[a].d++,v-=1<<t-r-1):a++;for(;a>=0;a--)e[a].d==t&&v<0&&(e[a].d--,v++);v!=0&&console.log("debt left")},f.F._goodIndex=function(e,t){var l=0;return t[16|l]<=e&&(l|=16),t[8|l]<=e&&(l|=8),t[4|l]<=e&&(l|=4),t[2|l]<=e&&(l|=2),t[1|l]<=e&&(l|=1),l},f.F._writeLit=function(e,t,l,a){return f.F._putsF(l,a,t[e<<1]),a+t[1+(e<<1)]},f.F.inflate=function(e,t){var l=Uint8Array;if(e[0]==3&&e[1]==0)return t||new l(0);var a=f.F,p=a._bitsF,v=a._bitsE,r=a._decodeTiny,i=a.makeCodes,n=a.codes2map,s=a._get17,h=a.U,U=t==null;U&&(t=new l(e.length>>>2<<3));for(var S,b,k=0,O=0,C=0,P=0,g=0,M=0,u=0,c=0,w=0;k==0;)if(k=p(e,w,1),O=p(e,w+1,2),w+=3,O!=0){if(U&&(t=f.F._check(t,c+(1<<17))),O==1&&(S=h.flmap,b=h.fdmap,M=511,u=31),O==2){C=v(e,w,5)+257,P=v(e,w+5,5)+1,g=v(e,w+10,4)+4,w+=14;for(var I=0;I<38;I+=2)h.itree[I]=0,h.itree[I+1]=0;var y=1;for(I=0;I<g;I++){var E=v(e,w+3*I,3);h.itree[1+(h.ordr[I]<<1)]=E,E>y&&(y=E)}w+=3*g,i(h.itree,y),n(h.itree,y,h.imap),S=h.lmap,b=h.dmap,w=r(h.imap,(1<<y)-1,C+P,e,w,h.ttree);var A=a._copyOut(h.ttree,0,C,h.ltree);M=(1<<A)-1;var _=a._copyOut(h.ttree,C,P,h.dtree);u=(1<<_)-1,i(h.ltree,A),n(h.ltree,A,S),i(h.dtree,_),n(h.dtree,_,b)}for(;;){var d=S[s(e,w)&M];w+=15&d;var o=d>>>4;if(!(o>>>8))t[c++]=o;else{if(o==256)break;var D=c+o-254;if(o>264){var T=h.ldef[o-257];D=c+(T>>>3)+v(e,w,7&T),w+=7&T}var H=b[s(e,w)&u];w+=15&H;var N=H>>>4,Q=h.ddef[N],$=(Q>>>4)+p(e,w,15&Q);for(w+=15&Q,U&&(t=f.F._check(t,c+(1<<17)));c<D;)t[c]=t[c++-$],t[c]=t[c++-$],t[c]=t[c++-$],t[c]=t[c++-$];c=D}}}else{7&w&&(w+=8-(7&w));var L=4+(w>>>3),R=e[L-4]|e[L-3]<<8;U&&(t=f.F._check(t,c+R)),t.set(new l(e.buffer,e.byteOffset+L,R),c),w=L+R<<3,c+=R}return t.length==c?t:t.slice(0,c)},f.F._check=function(e,t){var l=e.length;if(t<=l)return e;var a=new Uint8Array(Math.max(l<<1,t));return a.set(e,0),a},f.F._decodeTiny=function(e,t,l,a,p,v){for(var r=f.F._bitsE,i=f.F._get17,n=0;n<l;){var s=e[i(a,p)&t];p+=15&s;var h=s>>>4;if(h<=15)v[n]=h,n++;else{var U=0,S=0;h==16?(S=3+r(a,p,2),p+=2,U=v[n-1]):h==17?(S=3+r(a,p,3),p+=3):h==18&&(S=11+r(a,p,7),p+=7);for(var b=n+S;n<b;)v[n]=U,n++}}return p},f.F._copyOut=function(e,t,l,a){for(var p=0,v=0,r=a.length>>>1;v<l;){var i=e[v+t];a[v<<1]=0,a[1+(v<<1)]=i,i>p&&(p=i),v++}for(;v<r;)a[v<<1]=0,a[1+(v<<1)]=0,v++;return p},f.F.makeCodes=function(e,t){for(var l,a,p,v,r=f.F.U,i=e.length,n=r.bl_count,s=0;s<=t;s++)n[s]=0;for(s=1;s<i;s+=2)n[e[s]]++;var h=r.next_code;for(l=0,n[0]=0,a=1;a<=t;a++)l=l+n[a-1]<<1,h[a]=l;for(p=0;p<i;p+=2)(v=e[p+1])!=0&&(e[p]=h[v],h[v]++)},f.F.codes2map=function(e,t,l){for(var a=e.length,p=f.F.U.rev15,v=0;v<a;v+=2)if(e[v+1]!=0)for(var r=v>>1,i=e[v+1],n=r<<4|i,s=t-i,h=e[v]<<s,U=h+(1<<s);h!=U;)l[p[h]>>>15-t]=n,h++},f.F.revCodes=function(e,t){for(var l=f.F.U.rev15,a=15-t,p=0;p<e.length;p+=2){var v=e[p]<<t-e[p+1];e[p]=l[v]>>>a}},f.F._putsE=function(e,t,l){l<<=7&t;var a=t>>>3;e[a]|=l,e[a+1]|=l>>>8},f.F._putsF=function(e,t,l){l<<=7&t;var a=t>>>3;e[a]|=l,e[a+1]|=l>>>8,e[a+2]|=l>>>16},f.F._bitsE=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<l)-1},f.F._bitsF=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<l)-1},f.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},f.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},f.F.U=(F=Uint16Array,x=Uint32Array,{next_code:new F(16),bl_count:new F(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new F(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new x(32),flmap:new F(512),fltree:[],fdmap:new F(32),fdtree:[],lmap:new F(32768),ltree:[],ttree:[],dmap:new F(32768),dtree:[],imap:new F(512),itree:[],rev15:new F(32768),lhst:new x(286),dhst:new x(30),ihst:new x(19),lits:new x(15e3),strt:new F(65536),prev:new F(32768)}),function(){for(var e=f.F.U,t=0;t<32768;t++){var l=t;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,e.rev15[t]=(l>>>16|l<<16)>>>17}function a(p,v,r){for(;v--!=0;)p.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),f.F.makeCodes(e.fltree,9),f.F.codes2map(e.fltree,9,e.flmap),f.F.revCodes(e.fltree,9),a(e.fdtree,32,5),f.F.makeCodes(e.fdtree,5),f.F.codes2map(e.fdtree,5,e.fdmap),f.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)}()})();var pt=dt({__proto__:null,default:Oe},[Oe]);const de=function(){var m={nextZero(r,i){for(;r[i]!=0;)i++;return i},readUshort:(r,i)=>r[i]<<8|r[i+1],writeUshort(r,i,n){r[i]=n>>8&255,r[i+1]=255&n},readUint:(r,i)=>16777216*r[i]+(r[i+1]<<16|r[i+2]<<8|r[i+3]),writeUint(r,i,n){r[i]=n>>24&255,r[i+1]=n>>16&255,r[i+2]=n>>8&255,r[i+3]=255&n},readASCII(r,i,n){let s="";for(let h=0;h<n;h++)s+=String.fromCharCode(r[i+h]);return s},writeASCII(r,i,n){for(let s=0;s<n.length;s++)r[i+s]=n.charCodeAt(s)},readBytes(r,i,n){const s=[];for(let h=0;h<n;h++)s.push(r[i+h]);return s},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,i,n){let s,h="";for(let U=0;U<n;U++)h+=`%${m.pad(r[i+U].toString(16))}`;try{s=decodeURIComponent(h)}catch{return m.readASCII(r,i,n)}return s}};function F(r,i,n,s){const h=i*n,U=t(s),S=Math.ceil(i*U/8),b=new Uint8Array(4*h),k=new Uint32Array(b.buffer),{ctype:O}=s,{depth:C}=s,P=m.readUshort;if(O==6){const T=h<<2;if(C==8)for(var g=0;g<T;g+=4)b[g]=r[g],b[g+1]=r[g+1],b[g+2]=r[g+2],b[g+3]=r[g+3];if(C==16)for(g=0;g<T;g++)b[g]=r[g<<1]}else if(O==2){const T=s.tabs.tRNS;if(T==null){if(C==8)for(g=0;g<h;g++){var M=3*g;k[g]=255<<24|r[M+2]<<16|r[M+1]<<8|r[M]}if(C==16)for(g=0;g<h;g++)M=6*g,k[g]=255<<24|r[M+4]<<16|r[M+2]<<8|r[M]}else{var u=T[0];const H=T[1],N=T[2];if(C==8)for(g=0;g<h;g++){var c=g<<2;M=3*g,k[g]=255<<24|r[M+2]<<16|r[M+1]<<8|r[M],r[M]==u&&r[M+1]==H&&r[M+2]==N&&(b[c+3]=0)}if(C==16)for(g=0;g<h;g++)c=g<<2,M=6*g,k[g]=255<<24|r[M+4]<<16|r[M+2]<<8|r[M],P(r,M)==u&&P(r,M+2)==H&&P(r,M+4)==N&&(b[c+3]=0)}}else if(O==3){const T=s.tabs.PLTE,H=s.tabs.tRNS,N=H?H.length:0;if(C==1)for(var w=0;w<n;w++){var I=w*S,y=w*i;for(g=0;g<i;g++){c=y+g<<2;var E=3*(A=r[I+(g>>3)]>>7-((7&g)<<0)&1);b[c]=T[E],b[c+1]=T[E+1],b[c+2]=T[E+2],b[c+3]=A<N?H[A]:255}}if(C==2)for(w=0;w<n;w++)for(I=w*S,y=w*i,g=0;g<i;g++)c=y+g<<2,E=3*(A=r[I+(g>>2)]>>6-((3&g)<<1)&3),b[c]=T[E],b[c+1]=T[E+1],b[c+2]=T[E+2],b[c+3]=A<N?H[A]:255;if(C==4)for(w=0;w<n;w++)for(I=w*S,y=w*i,g=0;g<i;g++)c=y+g<<2,E=3*(A=r[I+(g>>1)]>>4-((1&g)<<2)&15),b[c]=T[E],b[c+1]=T[E+1],b[c+2]=T[E+2],b[c+3]=A<N?H[A]:255;if(C==8)for(g=0;g<h;g++){var A;c=g<<2,E=3*(A=r[g]),b[c]=T[E],b[c+1]=T[E+1],b[c+2]=T[E+2],b[c+3]=A<N?H[A]:255}}else if(O==4){if(C==8)for(g=0;g<h;g++){c=g<<2;var _=r[d=g<<1];b[c]=_,b[c+1]=_,b[c+2]=_,b[c+3]=r[d+1]}if(C==16)for(g=0;g<h;g++){var d;c=g<<2,_=r[d=g<<2],b[c]=_,b[c+1]=_,b[c+2]=_,b[c+3]=r[d+2]}}else if(O==0)for(u=s.tabs.tRNS?s.tabs.tRNS:-1,w=0;w<n;w++){const T=w*S,H=w*i;if(C==1)for(var o=0;o<i;o++){var D=(_=255*(r[T+(o>>>3)]>>>7-(7&o)&1))==255*u?0:255;k[H+o]=D<<24|_<<16|_<<8|_}else if(C==2)for(o=0;o<i;o++)D=(_=85*(r[T+(o>>>2)]>>>6-((3&o)<<1)&3))==85*u?0:255,k[H+o]=D<<24|_<<16|_<<8|_;else if(C==4)for(o=0;o<i;o++)D=(_=17*(r[T+(o>>>1)]>>>4-((1&o)<<2)&15))==17*u?0:255,k[H+o]=D<<24|_<<16|_<<8|_;else if(C==8)for(o=0;o<i;o++)D=(_=r[T+o])==u?0:255,k[H+o]=D<<24|_<<16|_<<8|_;else if(C==16)for(o=0;o<i;o++)_=r[T+(o<<1)],D=P(r,T+(o<<1))==u?0:255,k[H+o]=D<<24|_<<16|_<<8|_}return b}function x(r,i,n,s){const h=t(r),U=Math.ceil(n*h/8),S=new Uint8Array((U+1+r.interlace)*s);return i=r.tabs.CgBI?e(i,S):f(i,S),r.interlace==0?i=l(i,r,0,n,s):r.interlace==1&&(i=function(k,O){const C=O.width,P=O.height,g=t(O),M=g>>3,u=Math.ceil(C*g/8),c=new Uint8Array(P*u);let w=0;const I=[0,0,4,0,2,0,1],y=[0,4,0,2,0,1,0],E=[8,8,8,4,4,2,2],A=[8,8,4,4,2,2,1];let _=0;for(;_<7;){const o=E[_],D=A[_];let T=0,H=0,N=I[_];for(;N<P;)N+=o,H++;let Q=y[_];for(;Q<C;)Q+=D,T++;const $=Math.ceil(T*g/8);l(k,O,w,T,H);let L=0,R=I[_];for(;R<P;){let z=y[_],G=w+L*$<<3;for(;z<C;){var d;if(g==1&&(d=(d=k[G>>3])>>7-(7&G)&1,c[R*u+(z>>3)]|=d<<7-((7&z)<<0)),g==2&&(d=(d=k[G>>3])>>6-(7&G)&3,c[R*u+(z>>2)]|=d<<6-((3&z)<<1)),g==4&&(d=(d=k[G>>3])>>4-(7&G)&15,c[R*u+(z>>1)]|=d<<4-((1&z)<<2)),g>=8){const W=R*u+z*M;for(let B=0;B<M;B++)c[W+B]=k[(G>>3)+B]}G+=g,z+=D}L++,R+=o}T*H!=0&&(w+=H*(1+$)),_+=1}return c}(i,r)),i}function f(r,i){return e(new Uint8Array(r.buffer,2,r.length-6),i)}var e=function(){const r={H:{}};return r.H.N=function(i,n){const s=Uint8Array;let h,U,S=0,b=0,k=0,O=0,C=0,P=0,g=0,M=0,u=0;if(i[0]==3&&i[1]==0)return n||new s(0);const c=r.H,w=c.b,I=c.e,y=c.R,E=c.n,A=c.A,_=c.Z,d=c.m,o=n==null;for(o&&(n=new s(i.length>>>2<<5));S==0;)if(S=w(i,u,1),b=w(i,u+1,2),u+=3,b!=0){if(o&&(n=r.H.W(n,M+(1<<17))),b==1&&(h=d.J,U=d.h,P=511,g=31),b==2){k=I(i,u,5)+257,O=I(i,u+5,5)+1,C=I(i,u+10,4)+4,u+=14;let T=1;for(var D=0;D<38;D+=2)d.Q[D]=0,d.Q[D+1]=0;for(D=0;D<C;D++){const Q=I(i,u+3*D,3);d.Q[1+(d.X[D]<<1)]=Q,Q>T&&(T=Q)}u+=3*C,E(d.Q,T),A(d.Q,T,d.u),h=d.w,U=d.d,u=y(d.u,(1<<T)-1,k+O,i,u,d.v);const H=c.V(d.v,0,k,d.C);P=(1<<H)-1;const N=c.V(d.v,k,O,d.D);g=(1<<N)-1,E(d.C,H),A(d.C,H,h),E(d.D,N),A(d.D,N,U)}for(;;){const T=h[_(i,u)&P];u+=15&T;const H=T>>>4;if(!(H>>>8))n[M++]=H;else{if(H==256)break;{let N=M+H-254;if(H>264){const z=d.q[H-257];N=M+(z>>>3)+I(i,u,7&z),u+=7&z}const Q=U[_(i,u)&g];u+=15&Q;const $=Q>>>4,L=d.c[$],R=(L>>>4)+w(i,u,15&L);for(u+=15&L;M<N;)n[M]=n[M++-R],n[M]=n[M++-R],n[M]=n[M++-R],n[M]=n[M++-R];M=N}}}}else{7&u&&(u+=8-(7&u));const T=4+(u>>>3),H=i[T-4]|i[T-3]<<8;o&&(n=r.H.W(n,M+H)),n.set(new s(i.buffer,i.byteOffset+T,H),M),u=T+H<<3,M+=H}return n.length==M?n:n.slice(0,M)},r.H.W=function(i,n){const s=i.length;if(n<=s)return i;const h=new Uint8Array(s<<1);return h.set(i,0),h},r.H.R=function(i,n,s,h,U,S){const b=r.H.e,k=r.H.Z;let O=0;for(;O<s;){const C=i[k(h,U)&n];U+=15&C;const P=C>>>4;if(P<=15)S[O]=P,O++;else{let g=0,M=0;P==16?(M=3+b(h,U,2),U+=2,g=S[O-1]):P==17?(M=3+b(h,U,3),U+=3):P==18&&(M=11+b(h,U,7),U+=7);const u=O+M;for(;O<u;)S[O]=g,O++}}return U},r.H.V=function(i,n,s,h){let U=0,S=0;const b=h.length>>>1;for(;S<s;){const k=i[S+n];h[S<<1]=0,h[1+(S<<1)]=k,k>U&&(U=k),S++}for(;S<b;)h[S<<1]=0,h[1+(S<<1)]=0,S++;return U},r.H.n=function(i,n){const s=r.H.m,h=i.length;let U,S,b,k;const O=s.j;for(var C=0;C<=n;C++)O[C]=0;for(C=1;C<h;C+=2)O[i[C]]++;const P=s.K;for(U=0,O[0]=0,S=1;S<=n;S++)U=U+O[S-1]<<1,P[S]=U;for(b=0;b<h;b+=2)k=i[b+1],k!=0&&(i[b]=P[k],P[k]++)},r.H.A=function(i,n,s){const h=i.length,U=r.H.m.r;for(let S=0;S<h;S+=2)if(i[S+1]!=0){const b=S>>1,k=i[S+1],O=b<<4|k,C=n-k;let P=i[S]<<C;const g=P+(1<<C);for(;P!=g;)s[U[P]>>>15-n]=O,P++}},r.H.l=function(i,n){const s=r.H.m.r,h=15-n;for(let U=0;U<i.length;U+=2){const S=i[U]<<n-i[U+1];i[U]=s[S]>>>h}},r.H.M=function(i,n,s){s<<=7&n;const h=n>>>3;i[h]|=s,i[h+1]|=s>>>8},r.H.I=function(i,n,s){s<<=7&n;const h=n>>>3;i[h]|=s,i[h+1]|=s>>>8,i[h+2]|=s>>>16},r.H.e=function(i,n,s){return(i[n>>>3]|i[1+(n>>>3)]<<8)>>>(7&n)&(1<<s)-1},r.H.b=function(i,n,s){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)&(1<<s)-1},r.H.Z=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16|i[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const i=Uint16Array,n=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new i(65536),g:new i(32768)}}(),function(){const i=r.H.m;for(var n=0;n<32768;n++){let h=n;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,i.r[n]=(h>>>16|h<<16)>>>17}function s(h,U,S){for(;U--!=0;)h.push(0,S)}for(n=0;n<32;n++)i.q[n]=i.S[n]<<3|i.T[n],i.c[n]=i.p[n]<<4|i.z[n];s(i._,144,8),s(i._,112,9),s(i._,24,7),s(i._,8,8),r.H.n(i._,9),r.H.A(i._,9,i.J),r.H.l(i._,9),s(i.$,32,5),r.H.n(i.$,5),r.H.A(i.$,5,i.h),r.H.l(i.$,5),s(i.Q,19,0),s(i.C,286,0),s(i.D,30,0),s(i.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function l(r,i,n,s,h){let U=t(i);const S=Math.ceil(s*U/8);let b,k;U=Math.ceil(U/8);let O=r[n],C=0;if(O>1&&(r[n]=[0,0,1][O-2]),O==3)for(C=U;C<S;C++)r[C+1]=r[C+1]+(r[C+1-U]>>>1)&255;for(let P=0;P<h;P++)if(b=n+P*S,k=b+P+1,O=r[k-1],C=0,O==0)for(;C<S;C++)r[b+C]=r[k+C];else if(O==1){for(;C<U;C++)r[b+C]=r[k+C];for(;C<S;C++)r[b+C]=r[k+C]+r[b+C-U]}else if(O==2)for(;C<S;C++)r[b+C]=r[k+C]+r[b+C-S];else if(O==3){for(;C<U;C++)r[b+C]=r[k+C]+(r[b+C-S]>>>1);for(;C<S;C++)r[b+C]=r[k+C]+(r[b+C-S]+r[b+C-U]>>>1)}else{for(;C<U;C++)r[b+C]=r[k+C]+a(0,r[b+C-S],0);for(;C<S;C++)r[b+C]=r[k+C]+a(r[b+C-U],r[b+C-S],r[b+C-U-S])}return r}function a(r,i,n){const s=r+i-n,h=s-r,U=s-i,S=s-n;return h*h<=U*U&&h*h<=S*S?r:U*U<=S*S?i:n}function p(r,i,n){n.width=m.readUint(r,i),i+=4,n.height=m.readUint(r,i),i+=4,n.depth=r[i],i++,n.ctype=r[i],i++,n.compress=r[i],i++,n.filter=r[i],i++,n.interlace=r[i],i++}function v(r,i,n,s,h,U,S,b,k){const O=Math.min(i,h),C=Math.min(n,U);let P=0,g=0;for(let _=0;_<C;_++)for(let d=0;d<O;d++)if(S>=0&&b>=0?(P=_*i+d<<2,g=(b+_)*h+S+d<<2):(P=(-b+_)*i-S+d<<2,g=_*h+d<<2),k==0)s[g]=r[P],s[g+1]=r[P+1],s[g+2]=r[P+2],s[g+3]=r[P+3];else if(k==1){var M=r[P+3]*.00392156862745098,u=r[P]*M,c=r[P+1]*M,w=r[P+2]*M,I=s[g+3]*(1/255),y=s[g]*I,E=s[g+1]*I,A=s[g+2]*I;const o=1-M,D=M+I*o,T=D==0?0:1/D;s[g+3]=255*D,s[g+0]=(u+y*o)*T,s[g+1]=(c+E*o)*T,s[g+2]=(w+A*o)*T}else if(k==2)M=r[P+3],u=r[P],c=r[P+1],w=r[P+2],I=s[g+3],y=s[g],E=s[g+1],A=s[g+2],M==I&&u==y&&c==E&&w==A?(s[g]=0,s[g+1]=0,s[g+2]=0,s[g+3]=0):(s[g]=u,s[g+1]=c,s[g+2]=w,s[g+3]=M);else if(k==3){if(M=r[P+3],u=r[P],c=r[P+1],w=r[P+2],I=s[g+3],y=s[g],E=s[g+1],A=s[g+2],M==I&&u==y&&c==E&&w==A)continue;if(M<220&&I>20)return!1}return!0}return{decode:function(i){const n=new Uint8Array(i);let s=8;const h=m,U=h.readUshort,S=h.readUint,b={tabs:{},frames:[]},k=new Uint8Array(n.length);let O,C=0,P=0;const g=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(n[M]!=g[M])throw"The input is not a PNG file!";for(;s<n.length;){const _=h.readUint(n,s);s+=4;const d=h.readASCII(n,s,4);if(s+=4,d=="IHDR")p(n,s,b);else if(d=="iCCP"){for(var u=s;n[u]!=0;)u++;h.readASCII(n,s,u-s),n[u+1];const o=n.slice(u+2,s+_);let D=null;try{D=f(o)}catch{D=e(o)}b.tabs[d]=D}else if(d=="CgBI")b.tabs[d]=n.slice(s,s+4);else if(d=="IDAT"){for(M=0;M<_;M++)k[C+M]=n[s+M];C+=_}else if(d=="acTL")b.tabs[d]={num_frames:S(n,s),num_plays:S(n,s+4)},O=new Uint8Array(n.length);else if(d=="fcTL"){P!=0&&((A=b.frames[b.frames.length-1]).data=x(b,O.slice(0,P),A.rect.width,A.rect.height),P=0);const o={x:S(n,s+12),y:S(n,s+16),width:S(n,s+4),height:S(n,s+8)};let D=U(n,s+22);D=U(n,s+20)/(D==0?100:D);const T={rect:o,delay:Math.round(1e3*D),dispose:n[s+24],blend:n[s+25]};b.frames.push(T)}else if(d=="fdAT"){for(M=0;M<_-4;M++)O[P+M]=n[s+M+4];P+=_-4}else if(d=="pHYs")b.tabs[d]=[h.readUint(n,s),h.readUint(n,s+4),n[s+8]];else if(d=="cHRM")for(b.tabs[d]=[],M=0;M<8;M++)b.tabs[d].push(h.readUint(n,s+4*M));else if(d=="tEXt"||d=="zTXt"){b.tabs[d]==null&&(b.tabs[d]={});var c=h.nextZero(n,s),w=h.readASCII(n,s,c-s),I=s+_-c-1;if(d=="tEXt")E=h.readASCII(n,c+1,I);else{var y=f(n.slice(c+2,c+2+I));E=h.readUTF8(y,0,y.length)}b.tabs[d][w]=E}else if(d=="iTXt"){b.tabs[d]==null&&(b.tabs[d]={}),c=0,u=s,c=h.nextZero(n,u),w=h.readASCII(n,u,c-u);const o=n[u=c+1];var E;n[u+1],u+=2,c=h.nextZero(n,u),h.readASCII(n,u,c-u),u=c+1,c=h.nextZero(n,u),h.readUTF8(n,u,c-u),I=_-((u=c+1)-s),o==0?E=h.readUTF8(n,u,I):(y=f(n.slice(u,u+I)),E=h.readUTF8(y,0,y.length)),b.tabs[d][w]=E}else if(d=="PLTE")b.tabs[d]=h.readBytes(n,s,_);else if(d=="hIST"){const o=b.tabs.PLTE.length/3;for(b.tabs[d]=[],M=0;M<o;M++)b.tabs[d].push(U(n,s+2*M))}else if(d=="tRNS")b.ctype==3?b.tabs[d]=h.readBytes(n,s,_):b.ctype==0?b.tabs[d]=U(n,s):b.ctype==2&&(b.tabs[d]=[U(n,s),U(n,s+2),U(n,s+4)]);else if(d=="gAMA")b.tabs[d]=h.readUint(n,s)/1e5;else if(d=="sRGB")b.tabs[d]=n[s];else if(d=="bKGD")b.ctype==0||b.ctype==4?b.tabs[d]=[U(n,s)]:b.ctype==2||b.ctype==6?b.tabs[d]=[U(n,s),U(n,s+2),U(n,s+4)]:b.ctype==3&&(b.tabs[d]=n[s]);else if(d=="IEND")break;s+=_,h.readUint(n,s),s+=4}var A;return P!=0&&((A=b.frames[b.frames.length-1]).data=x(b,O.slice(0,P),A.rect.width,A.rect.height)),b.data=x(b,k,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b},toRGBA8:function(i){const n=i.width,s=i.height;if(i.tabs.acTL==null)return[F(i.data,n,s,i).buffer];const h=[];i.frames[0].data==null&&(i.frames[0].data=i.data);const U=n*s*4,S=new Uint8Array(U),b=new Uint8Array(U),k=new Uint8Array(U);for(let C=0;C<i.frames.length;C++){const P=i.frames[C],g=P.rect.x,M=P.rect.y,u=P.rect.width,c=P.rect.height,w=F(P.data,u,c,i);if(C!=0)for(var O=0;O<U;O++)k[O]=S[O];if(P.blend==0?v(w,u,c,S,n,s,g,M,0):P.blend==1&&v(w,u,c,S,n,s,g,M,1),h.push(S.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)v(b,u,c,S,n,s,g,M,0);else if(P.dispose==2)for(O=0;O<U;O++)S[O]=k[O]}}return h},_paeth:a,_copyTile:v,_bin:m}}();(function(){const{_copyTile:m}=de,{_bin:F}=de,x=de._paeth;var f={table:function(){const u=new Uint32Array(256);for(let c=0;c<256;c++){let w=c;for(let I=0;I<8;I++)1&w?w=3988292384^w>>>1:w>>>=1;u[c]=w}return u}(),update(u,c,w,I){for(let y=0;y<I;y++)u=f.table[255&(u^c[w+y])]^u>>>8;return u},crc:(u,c,w)=>4294967295^f.update(4294967295,u,c,w)};function e(u,c,w,I){c[w]+=u[0]*I>>4,c[w+1]+=u[1]*I>>4,c[w+2]+=u[2]*I>>4,c[w+3]+=u[3]*I>>4}function t(u){return Math.max(0,Math.min(255,u))}function l(u,c){const w=u[0]-c[0],I=u[1]-c[1],y=u[2]-c[2],E=u[3]-c[3];return w*w+I*I+y*y+E*E}function a(u,c,w,I,y,E,A){A==null&&(A=1);const _=I.length,d=[];for(var o=0;o<_;o++){const R=I[o];d.push([R>>>0&255,R>>>8&255,R>>>16&255,R>>>24&255])}for(o=0;o<_;o++){let R=4294967295;for(var D=0,T=0;T<_;T++){var H=l(d[o],d[T]);T!=o&&H<R&&(R=H,D=T)}}const N=new Uint32Array(y.buffer),Q=new Int16Array(c*w*4),$=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(o=0;o<$.length;o++)$[o]=255*(($[o]+.5)/16-.5);for(let R=0;R<w;R++)for(let z=0;z<c;z++){var L;o=4*(R*c+z),A!=2?L=[t(u[o]+Q[o]),t(u[o+1]+Q[o+1]),t(u[o+2]+Q[o+2]),t(u[o+3]+Q[o+3])]:(H=$[4*(3&R)+(3&z)],L=[t(u[o]+H),t(u[o+1]+H),t(u[o+2]+H),t(u[o+3]+H)]),D=0;let G=16777215;for(T=0;T<_;T++){const q=l(L,d[T]);q<G&&(G=q,D=T)}const W=d[D],B=[L[0]-W[0],L[1]-W[1],L[2]-W[2],L[3]-W[3]];A==1&&(z!=c-1&&e(B,Q,o+4,7),R!=w-1&&(z!=0&&e(B,Q,o+4*c-4,3),e(B,Q,o+4*c,5),z!=c-1&&e(B,Q,o+4*c+4,1))),E[o>>2]=D,N[o>>2]=I[D]}}function p(u,c,w,I,y){y==null&&(y={});const{crc:E}=f,A=F.writeUint,_=F.writeUshort,d=F.writeASCII;let o=8;const D=u.frames.length>1;let T,H=!1,N=33+(D?20:0);if(y.sRGB!=null&&(N+=13),y.pHYs!=null&&(N+=21),y.iCCP!=null&&(T=pako.deflate(y.iCCP),N+=21+T.length+4),u.ctype==3){for(var Q=u.plte.length,$=0;$<Q;$++)u.plte[$]>>>24!=255&&(H=!0);N+=8+3*Q+4+(H?8+1*Q+4:0)}for(var L=0;L<u.frames.length;L++)D&&(N+=38),N+=(W=u.frames[L]).cimg.length+12,L!=0&&(N+=4);N+=12;const R=new Uint8Array(N),z=[137,80,78,71,13,10,26,10];for($=0;$<8;$++)R[$]=z[$];if(A(R,o,13),o+=4,d(R,o,"IHDR"),o+=4,A(R,o,c),o+=4,A(R,o,w),o+=4,R[o]=u.depth,o++,R[o]=u.ctype,o++,R[o]=0,o++,R[o]=0,o++,R[o]=0,o++,A(R,o,E(R,o-17,17)),o+=4,y.sRGB!=null&&(A(R,o,1),o+=4,d(R,o,"sRGB"),o+=4,R[o]=y.sRGB,o++,A(R,o,E(R,o-5,5)),o+=4),y.iCCP!=null){const B=13+T.length;A(R,o,B),o+=4,d(R,o,"iCCP"),o+=4,d(R,o,"ICC profile"),o+=11,o+=2,R.set(T,o),o+=T.length,A(R,o,E(R,o-(B+4),B+4)),o+=4}if(y.pHYs!=null&&(A(R,o,9),o+=4,d(R,o,"pHYs"),o+=4,A(R,o,y.pHYs[0]),o+=4,A(R,o,y.pHYs[1]),o+=4,R[o]=y.pHYs[2],o++,A(R,o,E(R,o-13,13)),o+=4),D&&(A(R,o,8),o+=4,d(R,o,"acTL"),o+=4,A(R,o,u.frames.length),o+=4,A(R,o,y.loop!=null?y.loop:0),o+=4,A(R,o,E(R,o-12,12)),o+=4),u.ctype==3){for(A(R,o,3*(Q=u.plte.length)),o+=4,d(R,o,"PLTE"),o+=4,$=0;$<Q;$++){const B=3*$,q=u.plte[$],X=255&q,ee=q>>>8&255,be=q>>>16&255;R[o+B+0]=X,R[o+B+1]=ee,R[o+B+2]=be}if(o+=3*Q,A(R,o,E(R,o-3*Q-4,3*Q+4)),o+=4,H){for(A(R,o,Q),o+=4,d(R,o,"tRNS"),o+=4,$=0;$<Q;$++)R[o+$]=u.plte[$]>>>24&255;o+=Q,A(R,o,E(R,o-Q-4,Q+4)),o+=4}}let G=0;for(L=0;L<u.frames.length;L++){var W=u.frames[L];D&&(A(R,o,26),o+=4,d(R,o,"fcTL"),o+=4,A(R,o,G++),o+=4,A(R,o,W.rect.width),o+=4,A(R,o,W.rect.height),o+=4,A(R,o,W.rect.x),o+=4,A(R,o,W.rect.y),o+=4,_(R,o,I[L]),o+=2,_(R,o,1e3),o+=2,R[o]=W.dispose,o++,R[o]=W.blend,o++,A(R,o,E(R,o-30,30)),o+=4);const B=W.cimg;A(R,o,(Q=B.length)+(L==0?0:4)),o+=4;const q=o;d(R,o,L==0?"IDAT":"fdAT"),o+=4,L!=0&&(A(R,o,G++),o+=4),R.set(B,o),o+=Q,A(R,o,E(R,q,o-q)),o+=4}return A(R,o,0),o+=4,d(R,o,"IEND"),o+=4,A(R,o,E(R,o-4,4)),o+=4,R.buffer}function v(u,c,w){for(let I=0;I<u.frames.length;I++){const y=u.frames[I];y.rect.width;const E=y.rect.height,A=new Uint8Array(E*y.bpl+E);y.cimg=s(y.img,E,y.bpp,y.bpl,A,c,w)}}function r(u,c,w,I,y){const E=y[0],A=y[1],_=y[2],d=y[3],o=y[4],D=y[5];let T=6,H=8,N=255;for(var Q=0;Q<u.length;Q++){const re=new Uint8Array(u[Q]);for(var $=re.length,L=0;L<$;L+=4)N&=re[L+3]}const R=N!=255,z=function(Z,j,te,oe,V,fe){const J=[];for(var K=0;K<Z.length;K++){const ae=new Uint8Array(Z[K]),ue=new Uint32Array(ae.buffer);var le;let ce=0,ve=0,ge=j,Ie=te,Le=oe?1:0;if(K!=0){const ct=fe||oe||K==1||J[K-2].dispose!=0?1:2;let Qe=0,Ge=1e9;for(let Ce=0;Ce<ct;Ce++){var Ae=new Uint8Array(Z[K-1-Ce]);const ut=new Uint32Array(Z[K-1-Ce]);let we=j,me=te,_e=-1,Re=-1;for(let Ue=0;Ue<te;Ue++)for(let Ee=0;Ee<j;Ee++)ue[ie=Ue*j+Ee]!=ut[ie]&&(Ee<we&&(we=Ee),Ee>_e&&(_e=Ee),Ue<me&&(me=Ue),Ue>Re&&(Re=Ue));_e==-1&&(we=me=_e=Re=0),V&&((1&we)==1&&we--,(1&me)==1&&me--);const Ze=(_e-we+1)*(Re-me+1);Ze<Ge&&(Ge=Ze,Qe=Ce,ce=we,ve=me,ge=_e-we+1,Ie=Re-me+1)}Ae=new Uint8Array(Z[K-1-Qe]),Qe==1&&(J[K-1].dispose=2),le=new Uint8Array(ge*Ie*4),m(Ae,j,te,le,ge,Ie,-ce,-ve,0),Le=m(ae,j,te,le,ge,Ie,-ce,-ve,3)?1:0,Le==1?n(ae,j,te,le,{x:ce,y:ve,width:ge,height:Ie}):m(ae,j,te,le,ge,Ie,-ce,-ve,0)}else le=ae.slice(0);J.push({rect:{x:ce,y:ve,width:ge,height:Ie},img:le,blend:Le,dispose:0})}if(oe)for(K=0;K<J.length;K++){if((ye=J[K]).blend==1)continue;const ae=ye.rect,ue=J[K-1].rect,ce=Math.min(ae.x,ue.x),ve=Math.min(ae.y,ue.y),ge={x:ce,y:ve,width:Math.max(ae.x+ae.width,ue.x+ue.width)-ce,height:Math.max(ae.y+ae.height,ue.y+ue.height)-ve};J[K-1].dispose=1,K-1!=0&&i(Z,j,te,J,K-1,ge,V),i(Z,j,te,J,K,ge,V)}let Me=0;if(Z.length!=1)for(var ie=0;ie<J.length;ie++){var ye;Me+=(ye=J[ie]).rect.width*ye.rect.height}return J}(u,c,w,E,A,_),G={},W=[],B=[];if(I!=0){const re=[];for(L=0;L<z.length;L++)re.push(z[L].img.buffer);const Z=function(V){let fe=0;for(var J=0;J<V.length;J++)fe+=V[J].byteLength;const K=new Uint8Array(fe);let le=0;for(J=0;J<V.length;J++){const Ae=new Uint8Array(V[J]),Me=Ae.length;for(let ie=0;ie<Me;ie+=4){let ye=Ae[ie],ae=Ae[ie+1],ue=Ae[ie+2];const ce=Ae[ie+3];ce==0&&(ye=ae=ue=0),K[le+ie]=ye,K[le+ie+1]=ae,K[le+ie+2]=ue,K[le+ie+3]=ce}le+=Me}return K.buffer}(re),j=U(Z,I);for(L=0;L<j.plte.length;L++)W.push(j.plte[L].est.rgba);let te=0;for(L=0;L<z.length;L++){const oe=(X=z[L]).img.length;var q=new Uint8Array(j.inds.buffer,te>>2,oe>>2);B.push(q);const V=new Uint8Array(j.abuf,te,oe);D&&a(X.img,X.rect.width,X.rect.height,W,V,q),X.img.set(V),te+=oe}}else for(Q=0;Q<z.length;Q++){var X=z[Q];const re=new Uint32Array(X.img.buffer);var ee=X.rect.width;for($=re.length,q=new Uint8Array($),B.push(q),L=0;L<$;L++){const Z=re[L];if(L!=0&&Z==re[L-1])q[L]=q[L-1];else if(L>ee&&Z==re[L-ee])q[L]=q[L-ee];else{let j=G[Z];if(j==null&&(G[Z]=j=W.length,W.push(Z),W.length>=300))break;q[L]=j}}}const be=W.length;for(be<=256&&o==0&&(H=be<=2?1:be<=4?2:be<=16?4:8,H=Math.max(H,d)),Q=0;Q<z.length;Q++){(X=z[Q]).rect.x,X.rect.y,ee=X.rect.width;const re=X.rect.height;let Z=X.img;new Uint32Array(Z.buffer);let j=4*ee,te=4;if(be<=256&&o==0){j=Math.ceil(H*ee/8);var he=new Uint8Array(j*re);const oe=B[Q];for(let V=0;V<re;V++){L=V*j;const fe=V*ee;if(H==8)for(var Y=0;Y<ee;Y++)he[L+Y]=oe[fe+Y];else if(H==4)for(Y=0;Y<ee;Y++)he[L+(Y>>1)]|=oe[fe+Y]<<4-4*(1&Y);else if(H==2)for(Y=0;Y<ee;Y++)he[L+(Y>>2)]|=oe[fe+Y]<<6-2*(3&Y);else if(H==1)for(Y=0;Y<ee;Y++)he[L+(Y>>3)]|=oe[fe+Y]<<7-1*(7&Y)}Z=he,T=3,te=1}else if(R==0&&z.length==1){he=new Uint8Array(ee*re*3);const oe=ee*re;for(L=0;L<oe;L++){const V=3*L,fe=4*L;he[V]=Z[fe],he[V+1]=Z[fe+1],he[V+2]=Z[fe+2]}Z=he,T=2,te=3,j=3*ee}X.img=Z,X.bpl=j,X.bpp=te}return{ctype:T,depth:H,plte:W,frames:z}}function i(u,c,w,I,y,E,A){const _=Uint8Array,d=Uint32Array,o=new _(u[y-1]),D=new d(u[y-1]),T=y+1<u.length?new _(u[y+1]):null,H=new _(u[y]),N=new d(H.buffer);let Q=c,$=w,L=-1,R=-1;for(let G=0;G<E.height;G++)for(let W=0;W<E.width;W++){const B=E.x+W,q=E.y+G,X=q*c+B,ee=N[X];ee==0||I[y-1].dispose==0&&D[X]==ee&&(T==null||T[4*X+3]!=0)||(B<Q&&(Q=B),B>L&&(L=B),q<$&&($=q),q>R&&(R=q))}L==-1&&(Q=$=L=R=0),A&&((1&Q)==1&&Q--,(1&$)==1&&$--),E={x:Q,y:$,width:L-Q+1,height:R-$+1};const z=I[y];z.rect=E,z.blend=1,z.img=new Uint8Array(E.width*E.height*4),I[y-1].dispose==0?(m(o,c,w,z.img,E.width,E.height,-E.x,-E.y,0),n(H,c,w,z.img,E)):m(H,c,w,z.img,E.width,E.height,-E.x,-E.y,0)}function n(u,c,w,I,y){m(u,c,w,I,y.width,y.height,-y.x,-y.y,2)}function s(u,c,w,I,y,E,A){const _=[];let d,o=[0,1,2,3,4];E!=-1?o=[E]:(c*I>5e5||w==1)&&(o=[0]),A&&(d={level:0});const D=pt;for(var T=0;T<o.length;T++){for(let Q=0;Q<c;Q++)h(y,u,Q,I,w,o[T]);_.push(D.deflate(y,d))}let H,N=1e9;for(T=0;T<_.length;T++)_[T].length<N&&(H=T,N=_[T].length);return _[H]}function h(u,c,w,I,y,E){const A=w*I;let _=A+w;if(u[_]=E,_++,E==0)if(I<500)for(var d=0;d<I;d++)u[_+d]=c[A+d];else u.set(new Uint8Array(c.buffer,A,I),_);else if(E==1){for(d=0;d<y;d++)u[_+d]=c[A+d];for(d=y;d<I;d++)u[_+d]=c[A+d]-c[A+d-y]+256&255}else if(w==0){for(d=0;d<y;d++)u[_+d]=c[A+d];if(E==2)for(d=y;d<I;d++)u[_+d]=c[A+d];if(E==3)for(d=y;d<I;d++)u[_+d]=c[A+d]-(c[A+d-y]>>1)+256&255;if(E==4)for(d=y;d<I;d++)u[_+d]=c[A+d]-x(c[A+d-y],0,0)+256&255}else{if(E==2)for(d=0;d<I;d++)u[_+d]=c[A+d]+256-c[A+d-I]&255;if(E==3){for(d=0;d<y;d++)u[_+d]=c[A+d]+256-(c[A+d-I]>>1)&255;for(d=y;d<I;d++)u[_+d]=c[A+d]+256-(c[A+d-I]+c[A+d-y]>>1)&255}if(E==4){for(d=0;d<y;d++)u[_+d]=c[A+d]+256-x(0,c[A+d-I],0)&255;for(d=y;d<I;d++)u[_+d]=c[A+d]+256-x(c[A+d-y],c[A+d-I],c[A+d-y-I])&255}}}function U(u,c){const w=new Uint8Array(u),I=w.slice(0),y=new Uint32Array(I.buffer),E=S(I,c),A=E[0],_=E[1],d=w.length,o=new Uint8Array(d>>2);let D;if(w.length<2e7)for(var T=0;T<d;T+=4)D=b(A,H=w[T]*(1/255),N=w[T+1]*(1/255),Q=w[T+2]*(1/255),$=w[T+3]*(1/255)),o[T>>2]=D.ind,y[T>>2]=D.est.rgba;else for(T=0;T<d;T+=4){var H=w[T]*.00392156862745098,N=w[T+1]*(1/255),Q=w[T+2]*(1/255),$=w[T+3]*(1/255);for(D=A;D.left;)D=k(D.est,H,N,Q,$)<=0?D.left:D.right;o[T>>2]=D.ind,y[T>>2]=D.est.rgba}return{abuf:I.buffer,inds:o,plte:_}}function S(u,c,w){w==null&&(w=1e-4);const I=new Uint32Array(u.buffer),y={i0:0,i1:u.length,bst:null,est:null,tdst:0,left:null,right:null};y.bst=P(u,y.i0,y.i1),y.est=g(y.bst);const E=[y];for(;E.length<c;){let _=0,d=0;for(var A=0;A<E.length;A++)E[A].est.L>_&&(_=E[A].est.L,d=A);if(_<w)break;const o=E[d],D=O(u,I,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=D||o.i1<=D){o.est.L=0;continue}const T={i0:o.i0,i1:D,bst:null,est:null,tdst:0,left:null,right:null};T.bst=P(u,T.i0,T.i1),T.est=g(T.bst);const H={i0:D,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(H.bst={R:[],m:[],N:o.bst.N-T.bst.N},A=0;A<16;A++)H.bst.R[A]=o.bst.R[A]-T.bst.R[A];for(A=0;A<4;A++)H.bst.m[A]=o.bst.m[A]-T.bst.m[A];H.est=g(H.bst),o.left=T,o.right=H,E[d]=T,E.push(H)}for(E.sort((_,d)=>d.bst.N-_.bst.N),A=0;A<E.length;A++)E[A].ind=A;return[y,E]}function b(u,c,w,I,y){if(u.left==null)return u.tdst=function(T,H,N,Q,$){const L=H-T[0],R=N-T[1],z=Q-T[2],G=$-T[3];return L*L+R*R+z*z+G*G}(u.est.q,c,w,I,y),u;const E=k(u.est,c,w,I,y);let A=u.left,_=u.right;E>0&&(A=u.right,_=u.left);const d=b(A,c,w,I,y);if(d.tdst<=E*E)return d;const o=b(_,c,w,I,y);return o.tdst<d.tdst?o:d}function k(u,c,w,I,y){const{e:E}=u;return E[0]*c+E[1]*w+E[2]*I+E[3]*y-u.eMq}function O(u,c,w,I,y,E){for(I-=4;w<I;){for(;C(u,w,y)<=E;)w+=4;for(;C(u,I,y)>E;)I-=4;if(w>=I)break;const A=c[w>>2];c[w>>2]=c[I>>2],c[I>>2]=A,w+=4,I-=4}for(;C(u,w,y)>E;)w-=4;return w+4}function C(u,c,w){return u[c]*w[0]+u[c+1]*w[1]+u[c+2]*w[2]+u[c+3]*w[3]}function P(u,c,w){const I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0],E=w-c>>2;for(let A=c;A<w;A+=4){const _=u[A]*.00392156862745098,d=u[A+1]*(1/255),o=u[A+2]*(1/255),D=u[A+3]*(1/255);y[0]+=_,y[1]+=d,y[2]+=o,y[3]+=D,I[0]+=_*_,I[1]+=_*d,I[2]+=_*o,I[3]+=_*D,I[5]+=d*d,I[6]+=d*o,I[7]+=d*D,I[10]+=o*o,I[11]+=o*D,I[15]+=D*D}return I[4]=I[1],I[8]=I[2],I[9]=I[6],I[12]=I[3],I[13]=I[7],I[14]=I[11],{R:I,m:y,N:E}}function g(u){const{R:c}=u,{m:w}=u,{N:I}=u,y=w[0],E=w[1],A=w[2],_=w[3],d=I==0?0:1/I,o=[c[0]-y*y*d,c[1]-y*E*d,c[2]-y*A*d,c[3]-y*_*d,c[4]-E*y*d,c[5]-E*E*d,c[6]-E*A*d,c[7]-E*_*d,c[8]-A*y*d,c[9]-A*E*d,c[10]-A*A*d,c[11]-A*_*d,c[12]-_*y*d,c[13]-_*E*d,c[14]-_*A*d,c[15]-_*_*d],D=o,T=M;let H=[Math.random(),Math.random(),Math.random(),Math.random()],N=0,Q=0;if(I!=0)for(let L=0;L<16&&(H=T.multVec(D,H),Q=Math.sqrt(T.dot(H,H)),H=T.sml(1/Q,H),!(L!=0&&Math.abs(Q-N)<1e-9));L++)N=Q;const $=[y*d,E*d,A*d,_*d];return{Cov:o,q:$,e:H,L:N,eMq255:T.dot(T.sml(255,$),H),eMq:T.dot(H,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2])<<16|Math.round(255*$[1])<<8|Math.round(255*$[0])<<0)>>>0}}var M={multVec:(u,c)=>[u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3],u[4]*c[0]+u[5]*c[1]+u[6]*c[2]+u[7]*c[3],u[8]*c[0]+u[9]*c[1]+u[10]*c[2]+u[11]*c[3],u[12]*c[0]+u[13]*c[1]+u[14]*c[2]+u[15]*c[3]],dot:(u,c)=>u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3],sml:(u,c)=>[u*c[0],u*c[1],u*c[2],u*c[3]]};de.encode=function(c,w,I,y,E,A,_){y==null&&(y=0),_==null&&(_=!1);const d=r(c,w,I,y,[!1,!1,!1,0,_,!1]);return v(d,-1),p(d,w,I,E,A)},de.encodeLL=function(c,w,I,y,E,A,_,d){const o={ctype:0+(y==1?0:2)+(E==0?0:4),depth:A,frames:[]},D=(y+E)*A,T=D*w;for(let H=0;H<c.length;H++)o.frames.push({rect:{x:0,y:0,width:w,height:I},img:new Uint8Array(c[H]),blend:0,dispose:1,bpp:Math.ceil(D/8),bpl:Math.ceil(T/8)});return v(o,0,!0),p(o,w,I,_,d)},de.encode.compress=r,de.encode.dither=a,de.quantize=U,de.quantize.getKDtree=S,de.quantize.getNearest=b})();const Je={toArrayBuffer(m,F){const x=m.width,f=m.height,e=x<<2,t=m.getContext("2d").getImageData(0,0,x,f),l=new Uint32Array(t.data.buffer),a=(32*x+31)/32<<2,p=a*f,v=122+p,r=new ArrayBuffer(v),i=new DataView(r),n=1<<20;let s,h,U,S,b=n,k=0,O=0,C=0;function P(u){i.setUint16(O,u,!0),O+=2}function g(u){i.setUint32(O,u,!0),O+=4}function M(u){O+=u}P(19778),g(v),M(4),g(122),g(108),g(x),g(-f>>>0),P(1),P(32),g(3),g(p),g(2835),g(2835),M(8),g(16711680),g(65280),g(255),g(4278190080),g(1466527264),function u(){for(;k<f&&b>0;){for(S=122+k*a,s=0;s<e;)b--,h=l[C++],U=h>>>24,i.setUint32(S+s,h<<8|U),s+=4;k++}C<l.length?(b=n,setTimeout(u,Je._dly)):F(r)}()},toBlob(m,F){this.toArrayBuffer(m,x=>{F(new Blob([x],{type:"image/bmp"}))})},_dly:9};var se={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},vt={[se.CHROME]:16384,[se.FIREFOX]:11180,[se.DESKTOP_SAFARI]:16384,[se.IE]:8192,[se.IOS]:4096,[se.ETC]:8192};const je=typeof window<"u",et=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,De=je&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),At=(je||et)&&(De&&De.getOriginalSymbol(window,"File")||typeof File<"u"&&File),tt=(je||et)&&(De&&De.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ke(m,F,x=Date.now()){return new Promise(f=>{const e=m.split(","),t=e[0].match(/:(.*?);/)[1],l=globalThis.atob(e[1]);let a=l.length;const p=new Uint8Array(a);for(;a--;)p[a]=l.charCodeAt(a);const v=new Blob([p],{type:t});v.name=F,v.lastModified=x,f(v)})}function nt(m){return new Promise((F,x)=>{const f=new tt;f.onload=()=>F(f.result),f.onerror=e=>x(e),f.readAsDataURL(m)})}function rt(m){return new Promise((F,x)=>{const f=new Image;f.onload=()=>F(f),f.onerror=e=>x(e),f.src=m})}function Fe(){if(Fe.cachedResult!==void 0)return Fe.cachedResult;let m=se.ETC;const{userAgent:F}=navigator;return/Chrom(e|ium)/i.test(F)?m=se.CHROME:/iP(ad|od|hone)/i.test(F)&&/WebKit/i.test(F)?m=se.IOS:/Safari/i.test(F)?m=se.DESKTOP_SAFARI:/Firefox/i.test(F)?m=se.FIREFOX:(/MSIE/i.test(F)||document.documentMode)&&(m=se.IE),Fe.cachedResult=m,Fe.cachedResult}function it(m,F){const x=Fe(),f=vt[x];let e=m,t=F,l=e*t;const a=e>t?t/e:e/t;for(;l>f*f;){const p=(f+e)/2,v=(f+t)/2;p<v?(t=v,e=v*a):(t=p*a,e=p),l=e*t}return{width:e,height:t}}function ke(m,F){let x,f;try{if(x=new OffscreenCanvas(m,F),f=x.getContext("2d"),f===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{x=document.createElement("canvas"),f=x.getContext("2d")}return x.width=m,x.height=F,[x,f]}function ot(m,F){const{width:x,height:f}=it(m.width,m.height),[e,t]=ke(x,f);return F&&/jpe?g/.test(F)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(m,0,0,e.width,e.height),e}function xe(){return xe.cachedResult!==void 0||(xe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),xe.cachedResult}function He(m,F={}){return new Promise(function(x,f){let e,t;var l=function(){try{return t=ot(e,F.fileType||m.type),x([e,t])}catch(p){return f(p)}},a=function(p){try{var v=function(r){try{throw r}catch(i){return f(i)}};try{let r;return nt(m).then(function(i){try{return r=i,rt(r).then(function(n){try{return e=n,function(){try{return l()}catch(s){return f(s)}}()}catch(s){return v(s)}},v)}catch(n){return v(n)}},v)}catch(r){v(r)}}catch(r){return f(r)}};try{if(xe()||[se.DESKTOP_SAFARI,se.MOBILE_SAFARI].includes(Fe()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(m).then(function(p){try{return e=p,l()}catch{return a()}},a)}catch{a()}})}function Pe(m,F,x,f,e=1){return new Promise(function(t,l){let a;if(F==="image/png"){let v,r,i;return v=m.getContext("2d"),{data:r}=v.getImageData(0,0,m.width,m.height),i=de.encode([r.buffer],m.width,m.height,4096*e),a=new Blob([i],{type:F}),a.name=x,a.lastModified=f,p.call(this)}{let v=function(){return p.call(this)};if(F==="image/bmp")return new Promise(r=>Je.toBlob(m,r)).then((function(r){try{return a=r,a.name=x,a.lastModified=f,v.call(this)}catch(i){return l(i)}}).bind(this),l);{let r=function(){return v.call(this)};if(typeof OffscreenCanvas=="function"&&m instanceof OffscreenCanvas)return m.convertToBlob({type:F,quality:e}).then((function(i){try{return a=i,a.name=x,a.lastModified=f,r.call(this)}catch(n){return l(n)}}).bind(this),l);{let i;return i=m.toDataURL(F,e),Ke(i,x,f).then((function(n){try{return a=n,r.call(this)}catch(s){return l(s)}}).bind(this),l)}}}function p(){return t(a)}})}function pe(m){m.width=0,m.height=0}function Se(){return new Promise(function(m,F){let x,f,e,t;return Se.cachedResult!==void 0?m(Se.cachedResult):Ke("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(l){try{return x=l,He(x).then(function(a){try{return f=a[1],Pe(f,x.type,x.name,x.lastModified).then(function(p){try{return e=p,pe(f),He(e).then(function(v){try{return t=v[0],Se.cachedResult=t.width===1&&t.height===2,m(Se.cachedResult)}catch(r){return F(r)}},F)}catch(v){return F(v)}},F)}catch(p){return F(p)}},F)}catch(a){return F(a)}},F)})}function at(m){return new Promise((F,x)=>{const f=new tt;f.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return F(-2);const l=t.byteLength;let a=2;for(;a<l;){if(t.getUint16(a+2,!1)<=8)return F(-1);const p=t.getUint16(a,!1);if(a+=2,p==65505){if(t.getUint32(a+=2,!1)!=1165519206)return F(-1);const v=t.getUint16(a+=6,!1)==18761;a+=t.getUint32(a+4,v);const r=t.getUint16(a,v);a+=2;for(let i=0;i<r;i++)if(t.getUint16(a+12*i,v)==274)return F(t.getUint16(a+12*i+8,v))}else{if((65280&p)!=65280)break;a+=t.getUint16(a,!1)}}return F(-1)},f.onerror=e=>x(e),f.readAsArrayBuffer(m)})}function st(m,F){const{width:x}=m,{height:f}=m,{maxWidthOrHeight:e}=F;let t,l=m;return isFinite(e)&&(x>e||f>e)&&([l,t]=ke(x,f),x>f?(l.width=e,l.height=f/x*e):(l.width=x/f*e,l.height=e),t.drawImage(m,0,0,l.width,l.height),pe(m)),l}function ft(m,F){const{width:x}=m,{height:f}=m,[e,t]=ke(x,f);switch(F>4&&F<9?(e.width=f,e.height=x):(e.width=x,e.height=f),F){case 2:t.transform(-1,0,0,1,x,0);break;case 3:t.transform(-1,0,0,-1,x,f);break;case 4:t.transform(1,0,0,-1,0,f);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,f,0);break;case 7:t.transform(0,-1,-1,0,f,x);break;case 8:t.transform(0,-1,1,0,0,x)}return t.drawImage(m,0,0,x,f),pe(m),e}function Ye(m,F,x=0){return new Promise(function(f,e){let t,l,a,p,v,r,i,n,s,h,U,S,b,k,O,C,P,g,M,u;function c(I=5){if(F.signal&&F.signal.aborted)throw F.signal.reason;t+=I,F.onProgress(Math.min(t,100))}function w(I){if(F.signal&&F.signal.aborted)throw F.signal.reason;t=Math.min(Math.max(I,t),100),F.onProgress(t)}return t=x,l=F.maxIteration||10,a=1024*F.maxSizeMB*1024,c(),He(m,F).then((function(I){try{return[,p]=I,c(),v=st(p,F),c(),new Promise(function(y,E){var A;if(!(A=F.exifOrientation))return at(m).then((function(d){try{return A=d,_.call(this)}catch(o){return E(o)}}).bind(this),E);function _(){return y(A)}return _.call(this)}).then((function(y){try{return r=y,c(),Se().then((function(E){try{return i=E?v:ft(v,r),c(),n=F.initialQuality||1,s=F.fileType||m.type,Pe(i,s,m.name,m.lastModified,n).then((function(A){try{{let d=function(){if(l--&&(O>a||O>b)){let D,T;return D=u?.95*M.width:M.width,T=u?.95*M.height:M.height,[P,g]=ke(D,T),g.drawImage(M,0,0,D,T),n*=s==="image/png"?.85:.95,Pe(P,s,m.name,m.lastModified,n).then(function(H){try{return C=H,pe(M),M=P,O=C.size,w(Math.min(99,Math.floor((k-O)/(k-a)*100))),d}catch(N){return e(N)}},e)}return[1]},o=function(){return pe(M),pe(P),pe(v),pe(i),pe(p),w(100),f(C)};if(h=A,c(),U=h.size>a,S=h.size>m.size,!U&&!S)return w(100),f(h);var _;return b=m.size,k=h.size,O=k,M=i,u=!F.alwaysKeepResolution&&U,(_=(function(D){for(;D;){if(D.then)return void D.then(_,e);try{if(D.pop){if(D.length)return D.pop()?o.call(this):D;D=d}else D=D.call(this)}catch(T){return e(T)}}}).bind(this))(d)}}catch(d){return e(d)}}).bind(this),e)}catch(A){return e(A)}}).bind(this),e)}catch(E){return e(E)}}).bind(this),e)}catch(y){return e(y)}}).bind(this),e)})}const wt=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let $e;function mt(m,F){return new Promise((x,f)=>{$e||($e=function(l){const a=[];return a.push(l),URL.createObjectURL(new Blob(a))}(wt));const e=new Worker($e);e.addEventListener("message",function(l){if(F.signal&&F.signal.aborted)e.terminate();else if(l.data.progress===void 0){if(l.data.error)return f(new Error(l.data.error)),void e.terminate();x(l.data.file),e.terminate()}else F.onProgress(l.data.progress)}),e.addEventListener("error",f),F.signal&&F.signal.addEventListener("abort",()=>{f(F.signal.reason),e.terminate()}),e.postMessage({file:m,imageCompressionLibUrl:F.libURL,options:{...F,onProgress:void 0,signal:void 0}})})}function ne(m,F){return new Promise(function(x,f){let e,t,l,a,p,v;if(e={...F},l=0,{onProgress:a}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=s=>{l=s,typeof a=="function"&&a(l)},!(m instanceof Blob||m instanceof At))return f(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(m.type))return f(new Error("The file given is not an image"));if(v=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||v)return Ye(m,e).then((function(s){try{return t=s,n.call(this)}catch(h){return f(h)}}).bind(this),f);var r=(function(){try{return n.call(this)}catch(s){return f(s)}}).bind(this),i=function(s){try{return Ye(m,e).then(function(h){try{return t=h,r()}catch(U){return f(U)}},f)}catch(h){return f(h)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",mt(m,e).then(function(s){try{return t=s,r()}catch{return i()}},i)}catch{i()}function n(){try{t.name=m.name,t.lastModified=m.lastModified}catch{}try{e.preserveExif&&m.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===m.type)&&(t=Ve(m,t))}catch{}return x(t)}})}ne.getDataUrlFromFile=nt,ne.getFilefromDataUrl=Ke,ne.loadImage=rt,ne.drawImageInCanvas=ot,ne.drawFileInCanvas=He,ne.canvasToFile=Pe,ne.getExifOrientation=at,ne.handleMaxWidthOrHeight=st,ne.followExifOrientation=ft,ne.cleanupCanvasMemory=pe,ne.isAutoOrientationInBrowser=Se,ne.approximateBelowMaximumCanvasSizeOfBrowser=it,ne.copyExifWithoutOrientation=Ve,ne.getBrowserName=Fe,ne.version="2.0.2";const ze=m=>!m||m.length<12?null:{tradeId:m[0],date:m[1],time:m[2],amount:parseFloat(m[3])||0,tagId:m[4],tagName:m[5],tagColor:m[6],tagEmoji:m[7],driveImageId:m[8]||null,notes:m[9]||"",createdAt:m[10],updatedAt:m[11]},lt=async()=>{const m=localStorage.getItem(qe.SHEET_ID);if(!m)return[];try{return((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:m,range:`${Te.TRADES}!A2:L`})).result.values||[]).map(ze).filter(Boolean)}catch(F){return console.error("Failed to fetch trades:",F),[]}},bt=async(m,F)=>{console.log(` Fetching trades for: ${m}-${F} (month is 0-indexed, so ${F} = ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][F]})`);const x=await lt();console.log(` Total trades in sheet: ${x.length}`),x.length>0&&console.log(" All trade dates:",x.map(e=>e.date));const f=x.filter(e=>{const[t,l]=e.date.split("-").map(Number),a=t===m&&l===F+1;return console.log(a?`   Trade ${e.date} MATCHES!`:`   Trade ${e.date} doesn't match: tradeYear=${t} vs ${m}, tradeMonth=${l} vs ${F+1}`),a});return console.log(` Filtered to ${f.length} trades for ${m}-${F+1}`),f},yt=async m=>{const F=await Ne.getOrCreateSpreadsheet();let x=null;if(m.screenshot){const t=await ne(m.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),l=m.time.replace(":","-"),a=`${m.tradeId}_${m.date}_${l}.jpg`;x=await Ne.uploadImage(t,a)}const f=new Date().toISOString(),e=[m.tradeId,m.date,m.time,m.amount,m.tagId,m.tagName,m.tagColor,m.tagEmoji,x||"",m.notes||"",f,f];return await window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:F,range:`${Te.TRADES}!A:L`,valueInputOption:"USER_ENTERED",resource:{values:[e]}}),{...m,driveImageId:x,createdAt:f,updatedAt:f}},It=async({tradeId:m,updates:F})=>{const x=localStorage.getItem(qe.SHEET_ID),t=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:x,range:`${Te.TRADES}!A2:A`})).result.values||[]).findIndex(s=>s[0]===m);if(t===-1)throw new Error("Trade not found");const l=t+2,p=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:x,range:`${Te.TRADES}!A${l}:L${l}`})).result.values[0],v=ze(p);let r=v.driveImageId;if(F.driveImageId==="")r="";else if(F.screenshot){const s=await ne(F.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),h=F.date||v.date,U=(F.time||v.time).replace(":","-"),S=`${m}_${h}_${U}.jpg`;r=await Ne.uploadImage(s,S)}const i=new Date().toISOString(),n=[m,F.date||v.date,F.time||v.time,F.amount!==void 0?F.amount:v.amount,F.tagId||v.tagId,F.tagName||v.tagName,F.tagColor||v.tagColor,F.tagEmoji||v.tagEmoji,r||"",F.notes!==void 0?F.notes:v.notes,v.createdAt,i];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:x,range:`${Te.TRADES}!A${l}:L${l}`,valueInputOption:"USER_ENTERED",resource:{values:[n]}}),ze(n)},Ut=async m=>{const F=localStorage.getItem(qe.SHEET_ID),f=(await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:F,fields:"sheets(properties(sheetId,title))"})).result.sheets.find(v=>v.properties.title===Te.TRADES);if(!f)throw new Error("Trades sheet not found");const e=f.properties.sheetId,a=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:F,range:`${Te.TRADES}!A2:A`})).result.values||[]).findIndex(v=>v[0]===m);if(a===-1)throw new Error("Trade not found");const p=a+1;await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:F,resource:{requests:[{deleteDimension:{range:{sheetId:e,dimension:"ROWS",startIndex:p,endIndex:p+1}}}]}})},Tt=()=>Xe({queryKey:["trades"],queryFn:lt,staleTime:5*60*1e3,cacheTime:30*60*1e3}),_t=(m,F)=>Xe({queryKey:["trades",m,F],queryFn:()=>bt(m,F),staleTime:5*60*1e3}),St=()=>{const m=We();return Be({mutationFn:yt,onMutate:async F=>{await m.cancelQueries({queryKey:["trades"]});const x=m.getQueryData(["trades"]);return x&&m.setQueryData(["trades"],f=>[...f||[],F]),{previousTrades:x}},onError:(F,x,f)=>{f!=null&&f.previousTrades&&m.setQueryData(["trades"],f.previousTrades)},onSettled:()=>{m.invalidateQueries({queryKey:["trades"]})}})},Ct=()=>{const m=We();return Be({mutationFn:It,onSuccess:()=>{m.invalidateQueries({queryKey:["trades"]})}})},Rt=()=>{const m=We();return Be({mutationFn:Ut,onMutate:async F=>{await m.cancelQueries({queryKey:["trades"]});const x=m.getQueryData(["trades"]);return x&&m.setQueryData(["trades"],f=>(f||[]).filter(e=>e.tradeId!==F)),{previousTrades:x}},onError:(F,x,f)=>{f!=null&&f.previousTrades&&m.setQueryData(["trades"],f.previousTrades)},onSettled:()=>{m.invalidateQueries({queryKey:["trades"]})}})};export{St as a,Ct as b,Rt as c,_t as d,Tt as u};
